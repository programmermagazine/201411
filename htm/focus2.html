<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="../css/pmag.css" type="text/css" />
</head>
<body>
<div id="header_wrap">
   <h1><a href="https://www.facebook.com/groups/programmerMagazine">程式人雜誌</a> <sub> --  <a href="http://programmermagazine.github.io/201411/htm/home.html">2014 年 11 月號</a> (開放公益出版品)</sub></h1>
</div>
<div id="content">
<div id="TOC">
<ul>
<li><a href="#jslab----javascript-版的科學計算平台">JsLab -- JavaScript 版的科學計算平台</a></li>
</ul>
</div>
<h2 id="jslab----javascript-版的科學計算平台"><a href="#jslab----javascript-版的科學計算平台">JsLab -- JavaScript 版的科學計算平台</a></h2>
<p>雖然已經有很多科學計算軟體，像是 MatLab、 Mathematica、SPSS、SAS 等等，而且也有像 R、Octave、SciPy 等開放原始碼的科學計算軟體，但就是沒有以 JavaScript 為主的科學計算軟體。</p>
<p>於是我們決定要用 JavaScript 建構一個科學計算軟體，所以、JsLab 計劃就誕生了，關於 JsLab 的用法，可以參考下列的展示影片。</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=v-lAsFm1zwQ">展示影片：jslab -- 一個像 R 的 JavaScript 數學實驗環境</a></li>
</ul>
<p>下圖是我們已經上傳到 github 上的 JsLab 專案之執行畫面，該程式是一個純粹用 HTML+JavaScript 建構的網頁，網址如下：</p>
<ul>
<li><a href="http://ccckmit.github.io/jslab/source/jslab.html">http://ccckmit.github.io/jslab/source/jslab.html</a></li>
</ul>
<p>您可以連結到該網頁上直接使用該平台，雖然現在還沒有很強大，不過已經可以使用了。</p>
<div class="figure">
<img src="../img/JsLab.jpg" alt="圖、JsLab 的執行畫面 -- 繪製 3D 函數圖" /><p class="caption">圖、JsLab 的執行畫面 -- 繪製 3D 函數圖</p>
</div>
<p>在上述網頁中，我預設在編輯器裏放入了一個展示程式如下， JsLab 會執行該程式後將結果放在訊息視窗，並將繪圖部份顯示在右邊的窗框中。</p>
<p>檔案： curve3D.js</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="fu">f</span>(x, y) { 
  <span class="kw">return</span> (<span class="ot">Math</span>.<span class="fu">sin</span>(x/<span class="dv">50</span>) * <span class="ot">Math</span>.<span class="fu">cos</span>(y/<span class="dv">50</span>) * <span class="dv">50</span> + <span class="dv">50</span>); 
}
<span class="ot">G</span>.<span class="fu">curve3d</span>(f);</code></pre>
<p>您可以將程式貼到該網頁的程式編輯區，然後按下執行即可得到執行結果。舉例而言、您可以貼上下列程式到編輯區。</p>
<p>檔案： curveT.js</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="ot">G</span>.<span class="fu">curve</span>(<span class="fu">fx</span>(dt, <span class="dv">3</span>), {<span class="dt">name</span>:<span class="st">&quot;dt(3)&quot;</span>,  <span class="dt">step</span>:<span class="fl">0.1</span>});
<span class="ot">G</span>.<span class="fu">curve</span>(<span class="st">&quot;dt(x,10)&quot;</span>,{<span class="dt">name</span>:<span class="st">&quot;dt(10)&quot;</span>, <span class="dt">step</span>:<span class="fl">0.1</span>});
<span class="ot">G</span>.<span class="fu">curve</span>(<span class="fu">fx</span>(dt, <span class="dv">25</span>),{<span class="dt">name</span>:<span class="st">&quot;dt(25)&quot;</span>, <span class="dt">step</span>:<span class="fl">0.1</span>});</code></pre>
<p>然後按下執行的 run 按鈕，就可以看到下列的曲線圖。</p>
<div class="figure">
<img src="../img/JsLabCurve.jpg" alt="圖、JsLab 的執行畫面 -- 繪製 2D 曲線圖" /><p class="caption">圖、JsLab 的執行畫面 -- 繪製 2D 曲線圖</p>
</div>
<p>或者您也可以將下列程式貼到程式區，然後按下執行的 run 按鈕，就可以看到所繪出的散點圖。</p>
<p>檔案： plot1.js</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">Ax = <span class="ot">R</span>.<span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">10</span>, <span class="dv">1</span>);
Ay = <span class="ot">R</span>.<span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="fl">0.5</span>);
Bx = <span class="ot">R</span>.<span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">1</span>);
By = <span class="ot">R</span>.<span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="fl">0.5</span>);
<span class="ot">G</span>.<span class="fu">plot</span>(Ax, Ay, {<span class="dt">name</span>:<span class="st">&quot;A&quot;</span>});
<span class="ot">G</span>.<span class="fu">plot</span>(Bx, By, {<span class="dt">name</span>:<span class="st">&quot;B&quot;</span>});</code></pre>
<div class="figure">
<img src="../img/JsLabPlot.jpg" alt="圖、JsLab 的執行畫面 -- 隨機取樣後繪製散點圖" /><p class="caption">圖、JsLab 的執行畫面 -- 隨機取樣後繪製散點圖</p>
</div>
<p>當然、如果您將程式存檔在自己的電腦，那麼您也可以按下「選擇檔案」的按鈕，接著選取想要執行的檔案，就可以將程式上傳並執行，以下是我們透過上傳的方式執行 hist.js 程式的結果。</p>
<p>檔案： hist.js</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> x = <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">5</span>, <span class="dv">2</span>);
<span class="ot">G</span>.<span class="fu">hist</span>(x, {<span class="dt">name</span>:<span class="st">&quot;x&quot;</span>, <span class="dt">mode</span>:<span class="st">&quot;normalized&quot;</span>});
<span class="ot">G</span>.<span class="fu">curve</span>(<span class="st">&quot;dnorm(x, 5,2)&quot;</span>, {<span class="dt">name</span>:<span class="st">&quot;N(5,2)&quot;</span>, <span class="dt">step</span>:<span class="fl">0.2</span>});</code></pre>
<div class="figure">
<img src="../img/JsLabHist.jpg" alt="圖、JsLab 的執行畫面 -- 隨機取樣後繪製統計長條圖" /><p class="caption">圖、JsLab 的執行畫面 -- 隨機取樣後繪製統計長條圖</p>
</div>
<p>如果您並不想使用瀏覽器介面，也不需要繪製圖形，那麼您也可以採用 node.js 的命令列執行方式，直接引用 JsLab 背後的函式庫，像是 R.js 進行科學計算的動作，以下是我們在 node.js 中使用 R.js 進行隨機抽樣的一個範例。</p>
<p>檔案： sample.js</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> U = <span class="fu">require</span>(<span class="st">&quot;../source/U&quot;</span>);
<span class="ot">U</span>.<span class="fu">use</span>(<span class="st">&quot;../source/R&quot;</span>, <span class="st">&quot;R&quot;</span>);

<span class="fu">log</span>(<span class="st">&quot;=======二項分布測試===========&quot;</span>);
<span class="fu">log</span>(<span class="st">&quot;pbinom(7, 12, 0.4)=&quot;</span>+<span class="fu">pbinom</span>(<span class="dv">7</span>, <span class="dv">12</span>, <span class="fl">0.4</span>)); <span class="co">// &gt; pbinom(7, 12, 0.4) [1] 0.9426901</span>
<span class="fu">log</span>(<span class="st">&quot;qbinom(0.9, 12, 0.4)=&quot;</span>+<span class="fu">qbinom</span>(<span class="fl">0.9</span>, <span class="dv">12</span>, <span class="fl">0.4</span>)); <span class="co">// &gt; qbinom(0.9, 12, 0.4)[1] 7</span>
<span class="fu">log</span>(<span class="st">&quot;qbinom(0.95, 12, 0.4)=&quot;</span>+<span class="fu">qbinom</span>(<span class="fl">0.95</span>, <span class="dv">12</span>, <span class="fl">0.4</span>)); <span class="co">// &gt; qbinom(0.95, 12, 0.4)[1] 8</span>

<span class="fu">log</span>(<span class="st">&quot;=======常態分布抽樣===========&quot;</span>);
<span class="fu">log</span>(<span class="st">&quot;rnorm=&quot;</span>+rnorm);
<span class="fu">log</span>(<span class="st">&quot;rnorm(5, 2, 1)=&quot;</span>+<span class="fu">str</span>(<span class="fu">rnorm</span>(<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">1</span>)));
<span class="kw">var</span> y = <span class="fu">rnorm</span>(<span class="dv">25</span>, <span class="dv">0</span>, <span class="dv">2</span>);
<span class="fu">log</span>(<span class="st">&quot;y=&quot;</span>+<span class="fu">str</span>(y));

<span class="fu">log</span>(<span class="st">&quot;=======模擬丟銅板 100 次===========&quot;</span>);
<span class="fu">log</span>(<span class="st">&quot;sample([正, 反], 100)=&quot;</span>+<span class="fu">sample</span>([<span class="st">&quot;正&quot;</span>, <span class="st">&quot;反&quot;</span>], <span class="dv">100</span>));

<span class="fu">log</span>(<span class="st">&quot;=======模擬擲骰子 100 次===========&quot;</span>);
<span class="fu">log</span>(<span class="st">&quot;sample([1,2,3,4,5,6], 100)=&quot;</span>+<span class="fu">sample</span>([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>], <span class="dv">100</span>));</code></pre>
<p>執行結果</p>
<pre><code>D:\Dropbox\Public\jslab\test&gt;node sample.js
use ../source/R name=R
use ../js/jstat.js name=jStat
=======二項分布測試===========
pbinom(7, 12, 0.4)=0.9426900787200003
qbinom(0.9, 12, 0.4)=7
qbinom(0.95, 12, 0.4)=8
=======常態分布抽樣===========
rnorm=function (n, mean, sd) { return R.calls(n, jStat.normal.sample, mean, sd);
 }
rnorm(5, 2, 1)=[2.0748,2.3562,3.014,3.6833,4.1393]
y=[-0.3756,1.2935,-1.9635,0.5446,0.6514,2.7079,-1.2434,-4.8451,1.0937,2.5094,0.1
423,4.6915,1.3294,-1.3275,1.0153,2.5058,-2.5361,1.7784,3.908,-2.2349,0.186,-2.17
17,-1.4398,0.0423,1.2014]
=======模擬丟銅板 100 次===========
sample([正, 反], 100)=正,正,反,反,正,正,反,正,反,反,正,正,反,反,正,正,正,反,反,
正,反,正,反,反,反,反,正,正,正,反,反,反,正,反,正,反,反,正,反,正,正,正,反,正,反,反
,正,反,反,正,正,正,正,正,正,正,正,正,反,反,正,正,反,反,反,反,反,反,正,反,反,正,
反,正,反,反,正,反,正,反,反,反,正,正,反,反,正,正,正,正,反,正,反,反,正,正,反,反,反
,正
=======模擬擲骰子 100 次===========
sample([1,2,3,4,5,6], 100)=3,2,4,6,5,2,4,4,5,5,1,5,1,1,2,1,4,1,1,2,1,4,1,6,1,4,6
,5,1,4,1,6,1,1,2,6,1,5,1,3,3,1,3,4,2,5,6,4,3,5,2,4,3,1,2,1,6,3,2,4,1,2,1,4,2,6,3
,5,4,5,4,4,1,4,2,6,2,4,5,2,3,5,1,3,3,2,3,2,1,3,5,3,2,5,3,6,2,4,1,2</code></pre>
<p>另外、目前我們也還持續的在增加 JsLab 函式庫的功能，像是我們正在為 R.js 加上各種統計檢定的功能，以下是採用 node.js 環境執行檢定的一些案例。</p>
<p>由於 jStat 函式庫並沒有支援這些統計檢定的函數，因此筆者只好自行撰寫，為了撰寫這些檢定的程式，我甚至將 R 的原始碼給翻了出來，網址如下：</p>
<ul>
<li><a href="https://github.com/SurajGupta/r-source/tree/master/src/library/stats/R">https://github.com/SurajGupta/r-source/tree/master/src/library/stats/R</a></li>
</ul>
<p>以下是我們對這些檢定功能的一些測試範例，大部分的功能都有對應的 R 操作與執行結果，這樣我們就能利用 R 軟體來驗證我們所寫的檢定函數是否正確了。</p>
<p>檔案： rtest.js</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> U = <span class="fu">require</span>(<span class="st">&quot;../source/U&quot;</span>);
<span class="ot">U</span>.<span class="fu">use</span>(<span class="st">&quot;../source/R&quot;</span>, <span class="st">&quot;R&quot;</span>);

<span class="co">// x = rnorm(10, 5, 2)</span>
<span class="kw">var</span> x = [<span class="fl">7.169890</span> ,<span class="fl">2.188864</span> , <span class="fl">2.963868</span> ,<span class="fl">7.790631</span> ,<span class="fl">2.474261</span> ,<span class="fl">7.694849</span> ,<span class="fl">1.585007</span> ,<span class="fl">4.087697</span> ,<span class="fl">3.051643</span> ,<span class="fl">4.697559</span>];
<span class="co">// y = rnorm(10, 4,2)</span>
<span class="kw">var</span> y = [<span class="fl">4.9627295</span>,<span class="fl">6.0336209</span>,-<span class="fl">0.4610221</span>,<span class="fl">7.3744023</span>,<span class="fl">2.4804347</span>,<span class="fl">7.2053190</span>,<span class="fl">3.5558563</span>,<span class="fl">3.6505476</span>,<span class="fl">2.2200754</span>,<span class="fl">5.3021459</span>];
<span class="co">// py = x + rnorm(10, 1, 2)</span>
<span class="kw">var</span> py= [<span class="fl">9.829046</span> ,<span class="fl">2.491387</span> ,<span class="fl">6.037504</span>  ,<span class="fl">5.709755</span> ,<span class="fl">5.461208</span> ,<span class="fl">7.345603</span> ,<span class="fl">3.040538</span> ,<span class="fl">4.856838</span> ,<span class="fl">3.195437</span> ,<span class="fl">7.079105</span>];

<span class="fu">log</span>(<span class="st">&quot;x=&quot;</span>+<span class="fu">str</span>(x));
<span class="fu">log</span>(<span class="st">&quot;y=&quot;</span>+<span class="fu">str</span>(y));

<span class="fu">ttest</span>({<span class="dt">x</span>:x, <span class="dt">mu</span>:<span class="dv">6</span>, <span class="dt">alpha</span>:<span class="fl">0.05</span>, <span class="dt">op</span>:<span class="st">&quot;=&quot;</span>}).<span class="fu">report</span>();

<span class="co">/* </span>
<span class="co">&gt; t.test(x, mu=6, alpha=0.05)</span>

<span class="co">        One Sample t-test</span>

<span class="co">data:  x</span>
<span class="co">t = -2.1732, df = 9, p-value = 0.05781</span>
<span class="co">alternative hypothesis: true mean is not equal to 6</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> 2.674155 6.066699</span>
<span class="co">sample estimates:</span>
<span class="co">mean of x </span>
<span class="co"> 4.370427 */</span>

<span class="fu">ttest</span>({<span class="dt">x</span>:x, <span class="dt">mu</span>:<span class="dv">6</span>, <span class="dt">alpha</span>:<span class="fl">0.05</span>, <span class="dt">op</span>:<span class="st">&quot;&lt;&quot;</span>}).<span class="fu">report</span>();

<span class="co">/*</span>
<span class="co">&gt; t.test(x, mu=6, alternative=&quot;greater&quot;)</span>

<span class="co">        One Sample t-test</span>

<span class="co">data:  x</span>
<span class="co">t = -2.1732, df = 9, p-value = 0.9711</span>
<span class="co">alternative hypothesis: true mean is greater than 6</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> 2.995873      Inf</span>
<span class="co">sample estimates:</span>
<span class="co">mean of x </span>
<span class="co"> 4.370427 </span>
<span class="co">*/</span>

<span class="fu">ttest</span>({<span class="dt">x</span>:x, <span class="dt">mu</span>:<span class="dv">6</span>, <span class="dt">alpha</span>:<span class="fl">0.05</span>, <span class="dt">op</span>:<span class="st">&quot;&gt;&quot;</span>}).<span class="fu">report</span>();

<span class="co">/*</span>
<span class="co">&gt; t.test(x, mu=6, alternative=&quot;less&quot;)</span>

<span class="co">        One Sample t-test</span>

<span class="co">data:  x</span>
<span class="co">t = -2.1732, df = 9, p-value = 0.02891</span>
<span class="co">alternative hypothesis: true mean is less than 6</span>
<span class="co">95 percent confidence interval:</span>
<span class="co">     -Inf 5.744981</span>
<span class="co">sample estimates:</span>
<span class="co">mean of x </span>
<span class="co"> 4.370427 </span>
<span class="co">*/</span>

<span class="fu">ztest</span>({<span class="dt">x</span>:x, <span class="dt">mu</span>:<span class="dv">6</span>, <span class="dt">sd</span>:<span class="fl">2.5</span>, <span class="dt">alpha</span>:<span class="fl">0.05</span>, <span class="dt">op</span>:<span class="st">&quot;=&quot;</span>}).<span class="fu">report</span>();

<span class="fu">ttest</span>({<span class="dt">x</span>:x, <span class="dt">y</span>:y, <span class="dt">mu</span>:<span class="dv">1</span>, <span class="dt">alpha</span>:<span class="fl">0.05</span>, <span class="dt">varequal</span>:<span class="kw">true</span>, <span class="dt">op</span>:<span class="st">&quot;=&quot;</span>}).<span class="fu">report</span>();

<span class="co">/*</span>
<span class="co">&gt; t.test(x, y, mu=1, conf.level=0.95, var.equal=T, alternative=&quot;two.sided&quot;);</span>

<span class="co">        Two Sample t-test</span>

<span class="co">data:  x and y</span>
<span class="co">t = -0.8012, df = 18, p-value = 0.4335</span>
<span class="co">alternative hypothesis: true difference in means is not equal to 1</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> -2.122363  2.398395</span>
<span class="co">sample estimates:</span>
<span class="co">mean of x mean of y </span>
<span class="co"> 4.370427  4.232411 */</span>

<span class="fu">ttest</span>({<span class="dt">x</span>:x, <span class="dt">y</span>:py, <span class="dt">mu</span>:-<span class="dv">1</span>, <span class="dt">alpha</span>:<span class="fl">0.05</span>, <span class="dt">paired</span>:<span class="kw">true</span>, <span class="dt">op</span>:<span class="st">&quot;=&quot;</span>}).<span class="fu">report</span>();

<span class="co">/*</span>
<span class="co">&gt; t.test(x, py, mu=-1, conf.level=0.95, paired=T)</span>

<span class="co">        Paired t-test</span>

<span class="co">data:  x and py</span>
<span class="co">t = -0.252, df = 9, p-value = 0.8067</span>
<span class="co">alternative hypothesis: true difference in means is not equal to -1</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> -2.33885689  0.07042649</span>
<span class="co">sample estimates:</span>
<span class="co">mean of the differences </span>
<span class="co">              -1.134215 */</span>

<span class="fu">ttest</span>({<span class="dt">x</span>:x, <span class="dt">y</span>:y, <span class="dt">mu</span>:<span class="dv">1</span>, <span class="dt">alpha</span>:<span class="fl">0.05</span>, <span class="dt">op</span>:<span class="st">&quot;=&quot;</span>}).<span class="fu">report</span>();

<span class="co">/*</span>
<span class="co">&gt; t.test(x, y, mu=1, conf.level=0.95, alternative=&quot;two.sided&quot;);</span>

<span class="co">        Welch Two Sample t-test</span>

<span class="co">data:  x and y</span>
<span class="co">t = -0.8012, df = 17.985, p-value = 0.4335</span>
<span class="co">alternative hypothesis: true difference in means is not equal to 1</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> -2.122495  2.398527</span>
<span class="co">sample estimates:</span>
<span class="co">mean of x mean of y </span>
<span class="co"> 4.370427  4.232411 </span>
<span class="co">*/</span>

<span class="fu">ftest</span>({<span class="dt">x</span>:x, <span class="dt">y</span>:y}).<span class="fu">report</span>();

<span class="co">/*</span>
<span class="co">&gt; var.test(x,y)</span>

<span class="co">        F test to compare two variances</span>

<span class="co">data:  x and y</span>
<span class="co">F = 0.9445, num df = 9, denom df = 9, p-value = 0.9337</span>
<span class="co">alternative hypothesis: true ratio of variances is not equal to 1</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> 0.2346094 3.8026974</span>
<span class="co">sample estimates:</span>
<span class="co">ratio of variances </span>
<span class="co">         0.9445362 </span>
<span class="co">*/</span>

<span class="kw">var</span> vx = [<span class="dv">175</span>, <span class="dv">176</span>, <span class="dv">173</span>, <span class="dv">175</span>, <span class="dv">174</span>, <span class="dv">173</span>, <span class="dv">173</span>, <span class="dv">176</span>, <span class="dv">173</span>, <span class="dv">179</span>];
<span class="fu">vartest</span>({<span class="dt">x</span>:vx, <span class="dt">sd</span>:<span class="dv">2</span>, <span class="dt">alpha</span>:<span class="fl">0.05</span>, <span class="dt">op</span>:<span class="st">&quot;=&quot;</span>}).<span class="fu">report</span>();
<span class="co">// R 軟體沒有此函數，測試請看湯銀才 143 頁</span>
<span class="co">// 信賴區間 (1.793, 12.628)</span>

<span class="fu">binomtest</span>({<span class="dt">x</span>:<span class="dv">7</span>, <span class="dt">n</span>:<span class="dv">12</span>, <span class="dt">p</span>:<span class="fl">0.4</span>, <span class="dt">op</span>:<span class="st">&quot;&gt;&quot;</span>}).<span class="fu">report</span>();

<span class="co">/*</span>
<span class="co">&gt; binom.test(x=7, n=12, p=0.4, alternative=&quot;less&quot;)</span>

<span class="co">        Exact binomial test</span>

<span class="co">data:  7 and 12</span>
<span class="co">number of successes = 7, number of trials = 12, p-value = 0.9427</span>
<span class="co">alternative hypothesis: true probability of success is less than 0.4</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> 0.0000000 0.8189752</span>
<span class="co">sample estimates:</span>
<span class="co">probability of success </span>
<span class="co">             0.5833333 </span>
<span class="co">*/</span>

<span class="fu">binomtest</span>({<span class="dt">x</span>:<span class="dv">7</span>, <span class="dt">n</span>:<span class="dv">12</span>, <span class="dt">p</span>:<span class="fl">0.4</span>, <span class="dt">op</span>:<span class="st">&quot;&lt;&quot;</span>}).<span class="fu">report</span>();
<span class="co">/*</span>
<span class="co">&gt; binom.test(x=7, n=12, p=0.4, alternative=&quot;greater&quot;)</span>

<span class="co">        Exact binomial test</span>

<span class="co">data:  7 and 12</span>
<span class="co">number of successes = 7, number of trials = 12, p-value = 0.1582</span>
<span class="co">alternative hypothesis: true probability of success is greater than 0.4</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> 0.3152378 1.0000000</span>
<span class="co">sample estimates:</span>
<span class="co">probability of success </span>
<span class="co">             0.5833333 </span>
<span class="co">*/</span>



<span class="fu">binomtest</span>({<span class="dt">x</span>:<span class="dv">7</span>, <span class="dt">n</span>:<span class="dv">12</span>, <span class="dt">p</span>:<span class="fl">0.4</span>}).<span class="fu">report</span>(); <span class="co">// 有誤，p-value 與 R 不同</span>

<span class="co">/*</span>
<span class="co">&gt; binom.test(x=7, n=12, p=0.4)</span>

<span class="co">        Exact binomial test</span>

<span class="co">data:  7 and 12</span>
<span class="co">number of successes = 7, number of trials = 12, p-value = 0.2417 ==&gt; R.js ??? error : pvalue  : 0.1146</span>
<span class="co">alternative hypothesis: true probability of success is not equal to 0.4</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> 0.2766697 0.8483478</span>
<span class="co">sample estimates:</span>
<span class="co">probability of success </span>
<span class="co">             0.5833333 </span>
<span class="co">*/</span>


<span class="fu">proptest</span>({<span class="dt">x</span>:<span class="dv">91</span>, <span class="dt">n</span>:<span class="dv">100</span>, <span class="dt">p</span>:<span class="fl">0.9</span>, <span class="dt">correct</span>:<span class="kw">false</span>}).<span class="fu">report</span>();

<span class="co">/*  1-sample proportions test without continuity correction</span>

<span class="co">data:  91 out of 100, null probability 0.9</span>
<span class="co">X-squared = 0.1111, df = 1, p-value = 0.7389</span>
<span class="co">alternative hypothesis: true p is not equal to 0.9</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> 0.8377379 0.9519275</span>
<span class="co">sample estimates:</span>
<span class="co">   p </span>
<span class="co">0.91 */</span>

<span class="fu">proptest</span>({<span class="dt">x</span>:<span class="dv">23</span>, <span class="dt">n1</span>:<span class="dv">102</span>, <span class="dt">y</span>:<span class="dv">25</span>, <span class="dt">n2</span>:<span class="dv">135</span>, <span class="dt">correct</span>:<span class="kw">false</span>}).<span class="fu">report</span>();

<span class="co">/*</span>
<span class="co">&gt; success = c(23, 25)</span>
<span class="co">&gt; total = c(102, 135)</span>
<span class="co">&gt; prop.test(success, total)</span>

<span class="co">        2-sample test for equality of proportions with continuity correction</span>

<span class="co">data:  success out of total</span>
<span class="co">X-squared = 0.3615, df = 1, p-value = 0.5477</span>
<span class="co">alternative hypothesis: two.sided</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> -0.07256476  0.15317478</span>
<span class="co">sample estimates:</span>
<span class="co">   prop 1    prop 2 </span>
<span class="co">0.2254902 0.1851852 </span>
<span class="co">*/</span>

<span class="fu">proptest</span>({<span class="dt">x</span>:<span class="dv">8</span>, <span class="dt">n1</span>:<span class="dv">100</span>, <span class="dt">y</span>:<span class="dv">12</span>, <span class="dt">n2</span>:<span class="dv">200</span>, <span class="dt">op</span>:<span class="st">&quot;&lt;&quot;</span>, <span class="dt">correct</span>:<span class="kw">false</span>}).<span class="fu">report</span>();

<span class="co">/*</span>
<span class="co">&gt; prop.test(c(8,12), c(100,200), alternative=&quot;greater&quot;, correct=F)</span>

<span class="co">        2-sample test for equality of proportions without continuity</span>
<span class="co">        correction</span>

<span class="co">data:  c(8, 12) out of c(100, 200)</span>
<span class="co">X-squared = 0.4286, df = 1, p-value = 0.2563</span>
<span class="co">alternative hypothesis: greater</span>
<span class="co">95 percent confidence interval:</span>
<span class="co"> -0.03248088  1.00000000 =&gt; R.js ??? [-0.0303,Infinity]</span>
<span class="co">sample estimates:</span>
<span class="co">prop 1 prop 2 </span>
<span class="co">  0.08   0.06 </span>
<span class="co">*/</span></code></pre>
<p>執行結果</p>
<pre><code>D:\Dropbox\Public\jslab\test&gt;node rtest
use ../source/R name=R
use ../js/jstat.js name=jStat
x=[7.1699,2.1889,2.9639,7.7906,2.4743,7.6948,1.585,4.0877,3.0516,4.6976]
y=[4.9627,6.0336,-0.461,7.3744,2.4804,7.2053,3.5559,3.6505,2.2201,5.3021]
=========== report ==========
name    : &quot;ttest(X)&quot;
h       : &quot;H0:mu=6&quot;
alpha   : 0.05
op      : &quot;=&quot;
pvalue  : 0.0578
ci      : [2.6742,6.0667]
df      : 9
mean    : 4.3704
sd      : 2.3712
=========== report ==========
name    : &quot;ttest(X)&quot;
h       : &quot;H0:mu&lt;6&quot;
alpha   : 0.05
op      : &quot;&lt;&quot;
pvalue  : 0.9711
ci      : [2.9959,Infinity]
df      : 9
mean    : 4.3704
sd      : 2.3712
=========== report ==========
name    : &quot;ttest(X)&quot;
h       : &quot;H0:mu&gt;6&quot;
alpha   : 0.05
op      : &quot;&gt;&quot;
pvalue  : 0.0289
ci      : [-Infinity,5.745]
df      : 9
mean    : 4.3704
sd      : 2.3712
=========== report ==========
name    : &quot;ztest(X)&quot;
h       : &quot;H0:mu=6 when sd=2.5&quot;
alpha   : 0.05
op      : &quot;=&quot;
pvalue  : 0.0393
ci      : [2.9008,5.8401]
df      : 10
=========== report ==========
name    : &quot;ttest(X,Y,mu=1,varequal=true) (pooled)&quot;
h       : &quot;H0:mu1=mu2&quot;
alpha   : 0.05
op      : &quot;=&quot;
pvalue  : 0.4335
ci      : [-2.1224,2.3984]
df      : 18
mean    : &quot;mean(x)=4.3704 mean(y)=4.2324&quot;
sd      : &quot;sd(x)=2.3712 sd(y)=2.4399&quot;
=========== report ==========
name    : &quot;ttest(x,y,mu=-1,paired=true)&quot;
h       : &quot;H0:mu1=mu2&quot;
alpha   : 0.05
op      : &quot;=&quot;
pvalue  : 0.8067
ci      : [-2.3389,0.0704]
df      : 9
mean    : &quot;mean(x-y)=-1.1342&quot;
sd      : &quot;sd(x-y)=1.684&quot;
=========== report ==========
name    : &quot;ttest(x,y,mu=1,varequal=false), Welch t-test&quot;
h       : &quot;H0:mu1=mu2&quot;
alpha   : 0.05
op      : &quot;=&quot;
pvalue  : 0.4335
ci      : [-2.1225,2.3985]
df      : 17.9854
mean    : &quot;mean(x)=4.3704 mean(y)=4.2324&quot;
sd      : &quot;sd(x)=2.3712 sd(y)=2.4399&quot;
=========== report ==========
name    : &quot;ftest(X, Y)&quot;
h       : &quot;H0:σ1/σ2=1&quot;
alpha   : 0.05
op      : &quot;=&quot;
pvalue  : 0.9337
ci      : [0.2346,3.8027]
df      : [9,9]
ratio   : 0.9445
=========== report ==========
name    : &quot;chisqtest(X)&quot;
h       : &quot;H0:σ1=σ&quot;
alpha   : 0.05
op      : &quot;=&quot;
pvalue  : 0.9644
ci      : [1.7926,12.6278]
df      : 9
=========== report ==========
name    : &quot;binomtest({x:7,n:12,p:0.4,op:&quot;&gt;&quot;})&quot;
h       : &quot;H0:p&gt;0.4&quot;
alpha   : 0.05
op      : &quot;&gt;&quot;
pvalue  : 0.9427
ci      : [0,0.819]
df      : 1
p       : 0.5833
=========== report ==========
name    : &quot;binomtest({x:7,n:12,p:0.4,op:&quot;&lt;&quot;})&quot;
h       : &quot;H0:p&lt;0.4&quot;
alpha   : 0.05
op      : &quot;&lt;&quot;
pvalue  : 0.1582
ci      : [0.3152,1]
df      : 1
p       : 0.5833
=========== report ==========
name    : &quot;binomtest({x:7,n:12,p:0.4})&quot;
h       : &quot;H0:p=0.4&quot;
alpha   : 0.05
op      : &quot;=&quot;
pvalue  : 0.2417
ci      : [0.2767,0.8483]
df      : 1
p       : 0.5833
=========== report ==========
name    : &quot;proptest({x:91,n:100,p:0.9,correct:false}), zprop1&quot;
h       : &quot;H0:p=0.9&quot;
alpha   : 0.05
op      : &quot;=&quot;
pvalue  : 0.7389
ci      : [0.8377,0.9519]
df      : 1
p       : 0.91
=========== report ==========
name    : &quot;proptest({x:23,n1:102,y:25,n2:135,correct:false,p:0.5}), zprop2&quot;
h       : &quot;H0:p1-p2=0&quot;
alpha   : 0.05
op      : &quot;=&quot;
pvalue  : 0.4446
ci      : [-0.063,0.1436]
df      : 1
p       : [0.2255,0.1852]
=========== report ==========
name    : &quot;proptest({x:8,n1:100,y:12,n2:200,op:&quot;&lt;&quot;,correct:false,p:0.5}), zprop2
&quot;
h       : &quot;H0:p1-p2&lt;0&quot;
alpha   : 0.05
op      : &quot;&lt;&quot;
pvalue  : 0.2563
ci      : [-0.0303,Infinity]
df      : 1
p       : [0.08,0.06]</code></pre>
</div>
<div id="footer">
<a href="https://www.facebook.com/groups/programmerMagazine/">程式人雜誌</a> ，採用 <a href="http://creativecommons.org/licenses/by-sa/3.0/tw/ ">創作共用：姓名標示、相同方式分享</a> 授權，歡迎加入 <a href="https://www.facebook.com/groups/programmerMagazine/">雜誌社團</a>
</div>
</body>
</html>
